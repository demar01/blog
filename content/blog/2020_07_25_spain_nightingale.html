---
title: "Concurso Rladies"
author: "Maria Dermit"
date: 2020-07-25
categories: ["R"]
---



<div id="florence-nightingale" class="section level2">
<h2>Florence Nightingale</h2>
<p>El objetivo de este analysis es conmemorar los 200 años del nacimiento de <a href="https://es.wikipedia.org/wiki/Florence_Nightingale">Florence Nightingale</a> una enfermera y estadistica britanica pionera en visualizacion de datos. Para ello se propone analizar el conjunto de datos que ella utilizó para determinar los factores asociados a la alta mortalidad.</p>
<p>Florence Nightingale fue la primera mujer que utilizando las conclusiones de sus analysis logro convencer al gobierno birtanico para que impusiera medidas higienicas que llevaron a reducir significativamente las causas de mortalidad del ejército británico durante la guerra de Crimea.</p>
<p></br></p>
<pre class="r"><code>library(tidyverse) #para realizar los pasos de DS (data science)
library(here) #para organizar inputs y outputs
library(readxl) #para leer la hoja de excel
library(knitr) # para ver tablas con la funcion kable
library(magrittr) #para hacer pipe assignment
library(scales) #para por cientos.
library(showtext) #para fuentes de letra specificas
library(ggpomological) #para colores pomologicos 
library(gridExtra) #para poner titulos con colores
library(data.table) #para la funcion fread</code></pre>
<p>Voy a crear un projecto de RStudio donde voy a ordenar mis carpetas en:<br />
1. Data<br />
2. Plots<br />
3. Rscript<br />
</p>
<p>Voy a utilizar la library <code>here</code> que hace muy facil leer y poner los outputs en order.<br />
Voy a escribir mi codigo en un markdown que genera un documento pdf de facil lectura.</p>
<div id="empezamos-leyendo-los-datos" class="section level3">
<h3>Empezamos leyendo los datos</h3>
<pre class="r"><code>datos_florence_raw&lt;-fread(&quot;https://raw.githubusercontent.com/demar01/blog/master/data/nightingale/datos_florence.txt&quot;)</code></pre>
<p>Parece que los datos tienene un encabezado adicional que clasifica muertes y tasas de mortalidad (1000‰) en 3 categorias: enfermedades cimóticas (relacionadas con infeccion, prevenibles o mitigables), heridas y lesiones y otras causas.</p>
<p>Tenemos que hacer un limpiado inicial para poner los encabezados de forma correcta:</p>
<pre class="r"><code>datos_florence_raw&lt;-fread(&quot;https://raw.githubusercontent.com/demar01/blog/master/data/nightingale/datos_florence.txt&quot;, skip=1)</code></pre>
<pre class="r"><code>names(datos_florence_raw)[3:5]&lt;-paste0(names(datos_florence_raw)[3:5],&quot;_&quot;, &quot;death&quot;)
names(datos_florence_raw)[6:8]&lt;-paste0(names(datos_florence_raw)[6:8],&quot;_&quot;, &quot;rate&quot;)</code></pre>
<p>En realidad solo estamos interesados en las columnas de tasas.</p>
<p>Vamos a limpiar los datos un poco mas:</p>
<pre class="r"><code>datos_florence_clean&lt;-datos_florence_raw
datos_florence_clean&lt;-datos_florence_clean %&gt;% 
  rename(fecha=Month,
         army=`Average size of army`,
         zymotic_death=`Zymotic diseases_death`,
         wounds_death=`Wounds &amp; injuries_death`,
         other_death=`All other causes_death`,
         zymotic_rate=`Zymotic diseases_rate`,
         wounds_rate=`Wounds &amp; injuries_rate`,
         other_rate=`All other causes_rate`) %&gt;% 
  select(-zymotic_death,-wounds_death,-other_death) %&gt;% 
      mutate_if(is.character,as.factor)

datos_florence_clean_final&lt;-datos_florence_clean %&gt;% 
mutate(fecha = str_replace(fecha, &#39;_&#39;, &quot; &quot;))  </code></pre>
<p>Ahora ya tenemos los datos limpios.</p>
</div>
<div id="eda" class="section level3">
<h3>EDA</h3>
<p>Inicialmente hacemos unos primeros pasos de EDA (exploratory data analysis)</p>
<p><img src="/blog/2020_07_25_spain_nightingale_files/figure-html/unnamed-chunk-4-1.png" /><!-- -->
El aumento del tamano del ejercito aumento hasta cuatro veces con el avance de la guerra.</p>
<p><img src="/blog/2020_07_25_spain_nightingale_files/figure-html/unnamed-chunk-5-1.png" /><!-- -->
Las muertes por enfermedades cimoticas disminuyeron considerablemente despues del comienzo del segundo año de la guerra.</p>
<p><img src="/blog/2020_07_25_spain_nightingale_files/figure-html/unnamed-chunk-6-1.png" /><!-- --></p>
<p>Las muertes por heridas y lesiones tuvieron un repunte en la 2/3 de la guerra, potencialmente por personas que desgraciadamente terminaron muriendo como consecuencia de las heridas de guerra.</p>
<p>La tasa de mortalidad por enfermedades de causa cimotica contribuia mucho mas al elevado numero de muertes. Vamos a visualizar esto mejor:</p>
<p><img src="/blog/2020_07_25_spain_nightingale_files/figure-html/unnamed-chunk-7-1.png" /><!-- -->
Sin duda las muertes por enfermedades cimoticas eran las que contribuian mas al numero total de muertes. Esto resulta en alguna medida sorprendente ya que estas enfermedades eran clasificadas como prevenibles o mitigables. Florence entendio que esa tasa de muertes se podia reducir, lo cual le llevo a desarrollar el Diagrama de la Rosa para representar estos datos. Fueron estos graficos los que posteriormente ella enseño al gobierno britanico y consiguio que en marzo de 1855 se tomaran medidas de higiene que llevaron a reducir la tasa de muerte por enfermedades infecciosas.</p>
<p>Estos graficos se encuentran en la coleccion “Florence Nightingale Museum Collection” en el hospital de St Thomas de Londres</p>
<div class="figure">
<img src="/Users/dermit01/Downloads/blog-master-1/static/img/Nightingale-mortality.png" alt="" />
<p class="caption">Causas de la mortalidad en la armada en el este por Florence Nightingale, (1820 – 1910)</p>
</div>
<p>Vamos a representar estos datos con R:</p>
<p><img src="/blog/2020_07_25_spain_nightingale_files/figure-html/unnamed-chunk-8-1.png" /><!-- --></p>
<pre class="r"><code>datos_modeling %&gt;% filter(Regime==&quot;Before&quot;) %&gt;%  select(-Regime) %&gt;%  map_dbl(sum,na.rm = TRUE)/
  datos_modeling %&gt;% filter(Regime==&quot;After&quot;) %&gt;%  select(-Regime) %&gt;%  map_dbl(sum,na.rm = TRUE)</code></pre>
<pre><code>##         army zymotic_rate  wounds_rate   other_rate 
##    0.6676587    4.2211746    1.0775554    4.6704645</code></pre>
<p>La media de tasa de muertes por enfermedades cimoticas se redujo en mas de cuatro veces, mientras que la media de tasa de muertes por heridas se mantuvo estable.</p>
</div>
</div>
<div id="conclusiones" class="section level1">
<h1>Conclusiones</h1>
<p>Florence Nightingale fue la primera teorica en el campo de la enfermeria observando el elevado numero de muertes a causa de infecciones en los hospitales durante la guerra de Crimea. Su trabajo de analysis estadistico tuvo consecuencias directas mejorando la practica de la enfermeria y estableciendo gran parte de las bases de la enfermeria moderna.</p>
</div>
